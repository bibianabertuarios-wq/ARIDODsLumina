<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lumina - Wellness para Mujeres en TransiciÃ³n</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Lato', sans-serif; }
        h1, h2, h3 { font-family: 'Playfair Display', serif; }
        .gradient-text { background: linear-gradient(135deg, #9333ea 0%, #ec4899 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .elegant-button { transition: all 0.3s ease; }
        .elegant-button:hover { transform: translateY(-2px); box-shadow: 0 12px 24px rgba(147, 51, 234, 0.2); }
        .chart-container { position: relative; height: 300px; margin-bottom: 20px; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const LuminaApp = () => {
            const [language, setLanguage] = useState('es');
            const [showWelcome, setShowWelcome] = useState(true);
            const [currentUser, setCurrentUser] = useState(null);
            const [currentPage, setCurrentPage] = useState('dashboard');
            const [showOnboarding, setShowOnboarding] = useState(false);
            const [symptoms, setSymptoms] = useState({ sleep: 7, energy: 6, mood: 7, flashes: 3 });
            const [symptomsHistory, setSymptomsHistory] = useState([
                { week: 1, sleep: 6, energy: 5, mood: 6, flashes: 4 },
                { week: 2, sleep: 7, energy: 6, mood: 7, flashes: 3 },
                { week: 3, sleep: 7, energy: 7, mood: 7, flashes: 3 },
                { week: 4, sleep: 8, energy: 7, mood: 8, flashes: 2 }
            ]);
            const [periodData, setPeriodData] = useState([
                { month: 'Oct', intensity: 7, duration: 5, mood: 6 },
                { month: 'Nov', intensity: 6, duration: 5, mood: 7 },
                { month: 'Dic', intensity: 5, duration: 4, mood: 7 }
            ]);
            const [formData, setFormData] = useState({
                profileName: '', age: '', height: '', weight: '', activityLevel: 'moderate',
                conditions: [], goal: 'general_wellness'
            });
            const chartRef = useRef(null);
            const chartInstance = useRef(null);
            const periodChartRef = useRef(null);
            const periodChartInstance = useRef(null);

            const t = {
                es: {
                    app_name: 'Lumina', language: 'Idioma', dashboard: 'Inicio', nutrition: 'NutriciÃ³n', exercise: 'Ejercicio',
                    symptoms: 'SÃ­ntomas', period: 'PerÃ­odo', myths: 'Mitos', tips: 'Consejos', workshops: 'Talleres',
                    community: 'Comunidad', medical: 'MÃ©dico', save: 'Guardar', cancel: 'Cancelar', logout: 'Salir',
                    hello: 'Hola', your_stats: 'Tus EstadÃ­sticas', bmi_label: 'IMC', tdee_label: 'TDEE Diario',
                    calories: 'calorÃ­as', edit_profile: 'Editar Perfil', empowerment_msg: 'Esta es tu etapa de florecer. De brillar. De reinventarte.',
                    
                    // Welcome
                    welcome_title: 'Bienvenida a tu transformaciÃ³n', welcome_subtitle: 'âœ¨ Tu poder estÃ¡ dentro',
                    welcome_desc: 'Lumina estÃ¡ aquÃ­ para acompaÃ±arte en tu mejor versiÃ³n.',
                    what_is_perimenopause: 'Â¿QuÃ© es la Perimenopausia?',
                    perimenopause_desc: 'La perimenopausia es la transiciÃ³n hacia la menopausia, entre los 40 y 55 aÃ±os.',
                    normal_symptoms: 'SÃ­ntomas Normales:', symptom_hot_flashes: 'Sofocos y sudores nocturnos',
                    symptom_mood: 'Cambios de humor', symptom_sleep: 'Cambios en el sueÃ±o', symptom_weight: 'Cambios en el peso',
                    symptom_energy: 'Cambios en la energÃ­a', what_is_bmi: 'Â¿QuÃ© es el IMC?',
                    bmi_desc: 'RelaciÃ³n entre tu peso y altura. Es informaciÃ³n que te ayuda a personalizar nutriciÃ³n y ejercicio.',
                    what_is_tdee: 'Â¿QuÃ© es el TDEE?', 
                    tdee_desc: 'CalorÃ­as que tu cuerpo quema en un dÃ­a. Es empoderador porque SABES tu nÃºmero, tu verdad.',
                    what_you_find: 'QuÃ© encontrarÃ¡s aquÃ­ en Lumina:', find_nutrition: 'ðŸ¥— MenÃºs Personalizados',
                    find_exercise: 'ðŸ’ª Ejercicios Adaptados', find_tracking: 'ðŸ“Š Tracking de SÃ­ntomas',
                    find_education: 'ðŸ“š EducaciÃ³n', find_community: 'ðŸ’œ Una Comunidad Real',
                    find_refuge: 'ðŸ¡ Tu Refugio', lets_get_started: 'Vamos a comenzar',

                    // Registration
                    create_profile: 'Crear Tu Perfil', profile_name: 'Nombre del Perfil', age: 'Edad',
                    height: 'Altura (cm)', weight: 'Peso (kg)', activity_level: 'Nivel de Actividad',
                    sedentary: 'Sedentaria', light: 'Ligera', moderate: 'Moderada', active: 'Activa', very_active: 'Muy Activa',
                    health_conditions: 'Condiciones de Salud', select_conditions: 'Selecciona:',
                    condition_diabetes: 'Diabetes', condition_hypertension: 'HipertensiÃ³n', condition_celiac: 'Enfermedad CelÃ­aca',
                    condition_lactose: 'Intolerancia a Lactosa', condition_vegetarian: 'Vegetariana', condition_vegan: 'Vegana',
                    condition_arthritis: 'Artritis', condition_anxiety: 'Ansiedad/DepresiÃ³n', weight_loss: 'Â¿CuÃ¡l es tu objetivo?',
                    goal_weight_loss: 'Perder peso', goal_gain_strength: 'Ganar fuerza', goal_hormonal_balance: 'Equilibrio hormonal',
                    goal_general_wellness: 'Bienestar general',

                    // Nutrition
                    todays_menu: 'MenÃº de Hoy', breakfast: 'Desayuno', lunch: 'Almuerzo', dinner: 'Cena', snack: 'Snack',
                    ingredients: 'Ingredientes', preparation: 'PreparaciÃ³n', steps: 'Pasos', servings: 'Porciones',
                    prep_time: 'Prep', cook_time: 'CocciÃ³n', minutes: 'min', calories_label: 'CalorÃ­as',
                    nutrition_explanation: 'Este menÃº estÃ¡ personalizado para ti segÃºn tus restricciones y objetivos',

                    // Exercises
                    exercises: 'Ejercicios Personalizados', exercise_personalized: 'Estos ejercicios estÃ¡n adaptados a:',
                    your_goal: 'Tu Objetivo:', your_conditions: 'Tu Nivel:', exercise_details: 'Detalles',
                    reps: 'Repeticiones', duration: 'DuraciÃ³n', difficulty: 'Dificultad', frequency: 'Frecuencia',
                    benefits: 'Beneficios', how_to_do: 'CÃ³mo hacerlo', exercise_tip: 'Consejo:',

                    // Period
                    period_tracking: 'Tracking de PerÃ­odo', record_period: 'Registrar PerÃ­odo', intensity: 'Intensidad',
                    period_duration: 'DuraciÃ³n (dÃ­as)', last_period: 'Ãšltimo perÃ­odo', next_expected: 'PrÃ³ximo esperado',
                    period_pattern: 'Tu PatrÃ³n Menstrual', cycle_average: 'Ciclo promedio:', days_between: 'dÃ­as entre perÃ­odos',

                    // Symptoms
                    how_you_feel: 'Â¿CÃ³mo te sientes hoy?', rate_symptoms: 'Califica tus sÃ­ntomas (0-10)',
                    sleep_quality: 'Calidad del sueÃ±o', energy_level: 'Nivel de energÃ­a', mood: 'Ãnimo',
                    hot_flashes: 'Sofocos', record_today: 'Registrar Hoy', your_pattern: 'Tu PatrÃ³n de SÃ­ntomas',
                    download_report: 'Descargar Informe MÃ©dico', download_info: 'Descarga un PDF con tus sÃ­ntomas para compartir con tu doctor',

                    // Myths & Tips
                    myths_title: 'Mitos vs Realidad', myth_title: 'Mito', myth_truth: 'La Verdad', action: 'AcciÃ³n',
                    tips_title: 'Consejos Empoderados',

                    // Workshops & Community
                    workshops_title: 'Talleres & Webinars', community_title: 'Comunidad Lumina',
                    share_story: 'Comparte Tu Historia', your_story: 'Tu historia...',
                    webinar: 'Webinar', workshop: 'Taller'
                },
                en: {
                    app_name: 'Lumina', language: 'Language', dashboard: 'Home', nutrition: 'Nutrition', exercise: 'Exercise',
                    symptoms: 'Symptoms', period: 'Period', myths: 'Myths', tips: 'Tips', workshops: 'Workshops',
                    community: 'Community', medical: 'Medical', save: 'Save', cancel: 'Cancel', logout: 'Exit',
                    hello: 'Hello', your_stats: 'Your Stats', bmi_label: 'BMI', tdee_label: 'Daily TDEE',
                    calories: 'calories', edit_profile: 'Edit Profile', empowerment_msg: 'This is your time to bloom.',
                    
                    welcome_title: 'Welcome to Your Transformation', welcome_subtitle: 'âœ¨ Your Power is Within',
                    welcome_desc: 'Lumina is here to accompany you toward your best self.',
                    what_is_perimenopause: 'What is Perimenopause?',
                    perimenopause_desc: 'Perimenopause is the transition toward menopause, usually between ages 40-55.',
                    normal_symptoms: 'Normal Symptoms:', symptom_hot_flashes: 'Hot flashes and night sweats',
                    symptom_mood: 'Mood changes', symptom_sleep: 'Sleep changes', symptom_weight: 'Weight changes',
                    symptom_energy: 'Energy changes', what_is_bmi: 'What is BMI?',
                    bmi_desc: 'Relationship between your weight and height. Information to personalize nutrition and exercise.',
                    what_is_tdee: 'What is TDEE?',
                    tdee_desc: 'Calories your body burns daily. Empowering because YOU KNOW your number.',
                    what_you_find: 'What you\'ll find here:', find_nutrition: 'ðŸ¥— Personalized Menus',
                    find_exercise: 'ðŸ’ª Adapted Exercises', find_tracking: 'ðŸ“Š Symptom Tracking',
                    find_education: 'ðŸ“š Education', find_community: 'ðŸ’œ A Real Community',
                    find_refuge: 'ðŸ¡ Your Refuge', lets_get_started: 'Let\'s get started',

                    create_profile: 'Create Your Profile', profile_name: 'Profile Name', age: 'Age',
                    height: 'Height (cm)', weight: 'Weight (kg)', activity_level: 'Activity Level',
                    sedentary: 'Sedentary', light: 'Light', moderate: 'Moderate', active: 'Active', very_active: 'Very Active',
                    health_conditions: 'Health Conditions', select_conditions: 'Select:',
                    condition_diabetes: 'Diabetes', condition_hypertension: 'Hypertension', condition_celiac: 'Celiac Disease',
                    condition_lactose: 'Lactose Intolerance', condition_vegetarian: 'Vegetarian', condition_vegan: 'Vegan',
                    condition_arthritis: 'Arthritis', condition_anxiety: 'Anxiety/Depression', weight_loss: 'What\'s your goal?',
                    goal_weight_loss: 'Lose weight', goal_gain_strength: 'Gain strength', goal_hormonal_balance: 'Hormonal balance',
                    goal_general_wellness: 'General wellness',

                    todays_menu: 'Today\'s Menu', breakfast: 'Breakfast', lunch: 'Lunch', dinner: 'Dinner', snack: 'Snack',
                    ingredients: 'Ingredients', preparation: 'Preparation', steps: 'Steps', servings: 'Servings',
                    prep_time: 'Prep', cook_time: 'Cook', minutes: 'min', calories_label: 'Calories',
                    nutrition_explanation: 'This menu is personalized for you based on your restrictions and goals.',

                    exercises: 'Personalized Exercises', exercise_personalized: 'These exercises are adapted to:',
                    your_goal: 'Your Goal:', your_conditions: 'Your Level:', exercise_details: 'Details',
                    reps: 'Reps', duration: 'Duration', difficulty: 'Difficulty', frequency: 'Frequency',
                    benefits: 'Benefits', how_to_do: 'How to do it', exercise_tip: 'Tip:',

                    period_tracking: 'Period Tracking', record_period: 'Record Period', intensity: 'Intensity',
                    period_duration: 'Duration (days)', last_period: 'Last period', next_expected: 'Next expected',
                    period_pattern: 'Your Menstrual Pattern', cycle_average: 'Average cycle:', days_between: 'days between periods',

                    how_you_feel: 'How do you feel today?', rate_symptoms: 'Rate your symptoms (0-10)',
                    sleep_quality: 'Sleep quality', energy_level: 'Energy level', mood: 'Mood',
                    hot_flashes: 'Hot flashes', record_today: 'Record Today', your_pattern: 'Your Symptom Pattern',
                    download_report: 'Download Medical Report', download_info: 'Download a PDF with your symptoms to share with your doctor.',

                    myths_title: 'Myths vs Reality', myth_title: 'Myth', myth_truth: 'The Truth', action: 'Action',
                    tips_title: 'Empowered Tips',

                    workshops_title: 'Workshops & Webinars', community_title: 'Lumina Community',
                    share_story: 'Share Your Story', your_story: 'Your story...', webinar: 'Webinar', workshop: 'Workshop'
                }
            };

            // MENÃšS POR DÃA DE LA SEMANA
            const mealsData = {
                es: {
                    lunes: {
                        breakfast: {
                            name: 'Avena con Bayas y Almendras',
                            calories: 350, prepTime: 5, cookTime: 10, servings: 1,
                            ingredients: [
                                { name: 'Avena integral', qty: 50, unit: 'g' },
                                { name: 'Leche desnatada', qty: 200, unit: 'ml' },
                                { name: 'Fresas', qty: 100, unit: 'g' },
                                { name: 'ArÃ¡ndanos', qty: 50, unit: 'g' },
                                { name: 'Almendras', qty: 20, unit: 'g' },
                                { name: 'Miel', qty: 10, unit: 'ml' }
                            ],
                            steps: ['Calienta agua en una olla', 'Agrega la avena', 'Cocina 10 minutos', 'Sirve en plato', 'Agrega frutos secos']
                        },
                        lunch: {
                            name: 'Ensalada de Pollo y Quinoa',
                            calories: 450, prepTime: 15, cookTime: 20, servings: 2,
                            ingredients: [
                                { name: 'Pechuga de pollo', qty: 200, unit: 'g' },
                                { name: 'Quinoa cocida', qty: 100, unit: 'g' },
                                { name: 'Lechuga mixta', qty: 100, unit: 'g' },
                                { name: 'Tomate', qty: 1, unit: 'mediano' },
                                { name: 'Pepino', qty: 0.5, unit: 'pieza' },
                                { name: 'Aceite de oliva', qty: 15, unit: 'ml' }
                            ],
                            steps: ['Cocina la quinoa', 'Asa el pollo', 'Prepara vegetales', 'Mezcla todo', 'AliÃ±a con limÃ³n']
                        },
                        dinner: {
                            name: 'Lentejas Rojas Especiadas',
                            calories: 380, prepTime: 10, cookTime: 30, servings: 3,
                            ingredients: [
                                { name: 'Lentejas rojas', qty: 200, unit: 'g' },
                                { name: 'Cebolla', qty: 1, unit: 'medio' },
                                { name: 'Ajo', qty: 3, unit: 'dientes' },
                                { name: 'Tomate enlatado', qty: 400, unit: 'ml' },
                                { name: 'Comino', qty: 1, unit: 'cucharadita' },
                                { name: 'CÃºrcuma', qty: 0.5, unit: 'cucharadita' }
                            ],
                            steps: ['SofrÃ­e cebolla y ajo', 'Agrega lentejas', 'Vierte tomate', 'AÃ±ade especias', 'Cocina 30 min']
                        }
                    },
                    martes: {
                        breakfast: { name: 'Yogur Griego con Granola', calories: 320, prepTime: 2, cookTime: 0, servings: 1,
                            ingredients: [{ name: 'Yogur griego', qty: 150, unit: 'g' }, { name: 'Granola', qty: 40, unit: 'g' }, { name: 'ArÃ¡ndanos', qty: 80, unit: 'g' }],
                            steps: ['Coloca yogur', 'Agrega granola', 'Decora con frutos'] },
                        lunch: { name: 'SalmÃ³n al Horno', calories: 480, prepTime: 10, cookTime: 20, servings: 2,
                            ingredients: [{ name: 'SalmÃ³n', qty: 200, unit: 'g' }, { name: 'BrÃ³coli', qty: 200, unit: 'g' }, { name: 'LimÃ³n', qty: 0.5, unit: 'pieza' }],
                            steps: ['Precalienta horno a 200Â°C', 'Coloca salmÃ³n', 'Agrega verduras', 'Hornea 20 min'] },
                        dinner: { name: 'Pollo a la Cacerola', calories: 420, prepTime: 15, cookTime: 40, servings: 3,
                            ingredients: [{ name: 'Muslos de pollo', qty: 600, unit: 'g' }, { name: 'CalabacÃ­n', qty: 200, unit: 'g' }, { name: 'Cebolla', qty: 1, unit: 'mediana' }],
                            steps: ['Dora el pollo', 'SofrÃ­e verduras', 'Agrega caldo', 'Cocina 40 min'] }
                    },
                    miercoles: {
                        breakfast: { name: 'Huevos Revueltos', calories: 340, prepTime: 5, cookTime: 10, servings: 1,
                            ingredients: [{ name: 'Huevos', qty: 2, unit: 'piezas' }, { name: 'Pan integral', qty: 1, unit: 'rebanada' }, { name: 'Espinacas', qty: 50, unit: 'g' }],
                            steps: ['Tuesta el pan', 'SofrÃ­e espinacas', 'Revuelve huevos', 'Sirve junto'] },
                        lunch: { name: 'Pechuga de Pavo', calories: 460, prepTime: 10, cookTime: 25, servings: 2,
                            ingredients: [{ name: 'Pechuga de pavo', qty: 250, unit: 'g' }, { name: 'Batata', qty: 300, unit: 'g' }, { name: 'Lechuga', qty: 100, unit: 'g' }],
                            steps: ['Hierve batata', 'Cocina pavo', 'Prepara ensalada', 'Sirve juntos'] },
                        dinner: { name: 'Pasta Integral', calories: 400, prepTime: 10, cookTime: 25, servings: 2,
                            ingredients: [{ name: 'Pasta integral', qty: 150, unit: 'g' }, { name: 'Tomates', qty: 500, unit: 'g' }, { name: 'Ajo', qty: 3, unit: 'dientes' }, { name: 'Albahaca', qty: 10, unit: 'hojas' }],
                            steps: ['Cuece pasta', 'Prepara salsa', 'Mezcla todo', 'Decora con albahaca'] }
                    }
                },
                en: {
                    monday: {
                        breakfast: { name: 'Oatmeal with Berries', calories: 350, prepTime: 5, cookTime: 10, servings: 1,
                            ingredients: [{ name: 'Rolled oats', qty: 50, unit: 'g' }, { name: 'Skim milk', qty: 200, unit: 'ml' }, { name: 'Strawberries', qty: 100, unit: 'g' }],
                            steps: ['Heat water', 'Add oats', 'Cook 10 min', 'Serve', 'Add berries'] },
                        lunch: { name: 'Chicken & Quinoa Salad', calories: 450, prepTime: 15, cookTime: 20, servings: 2,
                            ingredients: [{ name: 'Chicken breast', qty: 200, unit: 'g' }, { name: 'Quinoa', qty: 100, unit: 'g' }, { name: 'Lettuce', qty: 100, unit: 'g' }],
                            steps: ['Cook quinoa', 'Grill chicken', 'Prepare vegetables', 'Mix all', 'Dress'] },
                        dinner: { name: 'Spiced Red Lentils', calories: 380, prepTime: 10, cookTime: 30, servings: 3,
                            ingredients: [{ name: 'Red lentils', qty: 200, unit: 'g' }, { name: 'Onion', qty: 1, unit: 'medium' }, { name: 'Garlic', qty: 3, unit: 'cloves' }],
                            steps: ['SautÃ© onion', 'Add lentils', 'Pour broth', 'Add spices', 'Cook 30 min'] }
                    }
                }
            };

            // EJERCICIOS PERSONALIZADOS
            const getPersonalizedExercises = () => {
                if (!currentUser) return [];
                
                const baseExercises = {
                    es: [
                        { id: 1, name: 'Caminata RÃ¡pida Matutina', type: 'cardio', desc: 'Activa tu metabolismo',
                            duration: '30 min', difficulty: 'FÃ¡cil', reps: '5-7 veces/semana',
                            benefits: 'Quema calorÃ­as, mejor circulaciÃ³n, reduce estrÃ©s',
                            howto: 'Camina a ritmo que te permita hablar pero no cantar. MantÃ©n brazos en 90Â°.',
                            suitable_for: { weight_loss: true, hormonal_balance: true, gain_strength: false },
                            conditions: { arthritis: true, anxiety: true } },
                        { id: 2, name: 'Sentadillas con Control', type: 'strength', desc: 'Fortalece piernas y glÃºteos',
                            duration: '20 min', difficulty: 'Moderada', reps: '3 series x 12 reps',
                            benefits: 'Densidad Ã³sea, fortalecimiento, mejor balance',
                            howto: 'Baja lentamente como si buscaras una silla. Rodillas no pasan punteras de pies.',
                            suitable_for: { weight_loss: true, gain_strength: true, hormonal_balance: true },
                            conditions: { arthritis: false, anxiety: false } },
                        { id: 3, name: 'Yoga Suave', type: 'flexibility', desc: 'Flexibilidad y relajaciÃ³n',
                            duration: '45 min', difficulty: 'FÃ¡cil', reps: '2-3 veces/semana',
                            benefits: 'Flexibilidad, mejor sueÃ±o, reducciÃ³n de estrÃ©s',
                            howto: 'Fluye lentamente entre posturas. Respira profundamente en cada una.',
                            suitable_for: { weight_loss: false, gain_strength: false, hormonal_balance: true },
                            conditions: { arthritis: true, anxiety: true } },
                        { id: 4, name: 'Pilates Core', type: 'strength', desc: 'Fortalece nÃºcleo',
                            duration: '25 min', difficulty: 'Moderada', reps: '3 series x 10 reps',
                            benefits: 'Core fuerte, mejor postura, estabilidad',
                            howto: 'Contrae abdomen antes de cada movimiento. MantÃ©n control total.',
                            suitable_for: { weight_loss: true, gain_strength: true, hormonal_balance: false },
                            conditions: { arthritis: true, anxiety: false } }
                    ],
                    en: [
                        { id: 1, name: 'Brisk Morning Walk', type: 'cardio', desc: 'Activate your metabolism',
                            duration: '30 min', difficulty: 'Easy', reps: '5-7 times/week',
                            benefits: 'Burns calories, better circulation, reduces stress',
                            howto: 'Walk at a pace where you can talk but not sing. Keep arms at 90Â°.',
                            suitable_for: { weight_loss: true, hormonal_balance: true, gain_strength: false },
                            conditions: { arthritis: true, anxiety: true } }
                    ]
                };

                const allExercises = baseExercises[language] || baseExercises.es;
                return allExercises.filter(ex => ex.suitable_for[currentUser.goal] || ex.suitable_for[currentUser.goal] !== false);
            };

            // MITOS EXPANDIDOS
            const mythsData = {
                es: [
                    { myth: 'La perimenopausia es una enfermedad que necesita medicaciÃ³n obligatoriamente',
                        truth: 'La perimenopausia es una transiciÃ³n natural. Existen mÃºltiples opciones: cambios de estilo de vida (nutriciÃ³n, ejercicio, sueÃ±o), terapia hormonal si es necesaria, y tratamientos naturales. La clave es explorar QUÃ‰ FUNCIONA PARA TI.',
                        action: 'MantÃ©n un registro de tus sÃ­ntomas durante 2-3 meses. Esto te ayudarÃ¡ a saber quÃ© cambios funcionan.' },
                    { myth: 'Los sofocos desaparecerÃ¡n solos sin hacer nada',
                        truth: 'Los sofocos pueden mejorar significativamente con: ejercicio regular (reduce intensidad 30-40%), reducciÃ³n de estrÃ©s (respiraciÃ³n, meditaciÃ³n), evitar disparadores (alcohol, cafeÃ­na, picante), nutriciÃ³n equilibrada. Algunas mujeres mejoran en meses, otras en aÃ±os.',
                        action: 'Identifica TUS disparadores personales. Cada mujer es diferente. Prueba tÃ©cnicas de respiraciÃ³n profunda durante los sofocos.' },
                    { myth: 'Todas las mujeres engordan durante la perimenopausia',
                        truth: 'El metabolismo desciende ligeramente (100-200 cal/dÃ­a), pero CON nutriciÃ³n consciente y ejercicio (especialmente fuerza), muchas mujeres mantienen su peso. La ganancia de peso no es inevitable. Es una oportunidad de aprender a moverte y alimentarte mejor.',
                        action: 'EnfÃ³cate en GANAR FUERZA y TENER ENERGÃA, no solo en nÃºmeros de la balanza. La composiciÃ³n corporal es mÃ¡s importante que el peso.' },
                    { myth: 'El deseo sexual desaparece para siempre',
                        truth: 'Algunos cambios hormonales pueden afectar la libido, pero esto NO es definitivo. Con comunicaciÃ³n con tu pareja, exploraciÃ³n personal, estrÃ©s reducido y ejercicio, muchas mujeres descubren una sexualidad mÃ¡s profunda y satisfactoria.',
                        action: 'Habla abiertamente con tu pareja. Busca lubricantes naturales si hay sequedad. Prioriza el self-care y la intimidad emocional.' },
                    { myth: 'Si tienes sÃ­ntomas severos, siempre debes tomar hormonas',
                        truth: 'La terapia hormonal es UNA opciÃ³n, no la Ãºnica. Dependiendo de tu historial mÃ©dico, edad y sÃ­ntomas, existen alternativas: fitoestrÃ³genos (soja, trÃ©bol rojo), suplementos, cambios de estilo de vida intensivos, antidepresivos de baja dosis. Decide CON tu doctor.',
                        action: 'Consulta con un ginecÃ³logo especializad en perimenopausia. Pide que te explique TODAS las opciones disponibles para ti.' }
                ],
                en: [
                    { myth: 'Perimenopause is a disease that MUST be treated with medication',
                        truth: 'Perimenopause is a natural transition. Multiple options exist: lifestyle changes (nutrition, exercise, sleep), hormone therapy if needed, natural treatments. The key is finding what WORKS FOR YOU.',
                        action: 'Keep a symptom journal for 2-3 months. This shows you what changes actually help.' },
                    { myth: 'Hot flashes will disappear on their own without doing anything',
                        truth: 'Hot flashes can improve significantly with: regular exercise (reduces intensity 30-40%), stress reduction (breathing, meditation), avoiding triggers (alcohol, caffeine, spicy food), balanced nutrition. Some women improve in months, others in years.',
                        action: 'Identify YOUR personal triggers. Every woman is different. Practice deep breathing during hot flashes.' },
                    { myth: 'All women gain weight during perimenopause',
                        truth: 'Metabolism drops slightly (100-200 cal/day), but WITH conscious nutrition and exercise (especially strength training), many women maintain weight. Weight gain is NOT inevitable. It\'s an opportunity to move and eat better.',
                        action: 'Focus on GAINING STRENGTH and HAVING ENERGY, not just scale numbers. Body composition matters more than weight.' }
                ]
            };

            // CONSEJOS MEJORADOS
            const tipsData = {
                es: [
                    { title: 'SueÃ±o de Calidad: 7-9 Horas', emoji: 'ðŸŒ™',
                        desc: 'El sueÃ±o es donde ocurre la magia. Tu cuerpo se repara, hormones se regulan, mente se regenera. Sin sueÃ±o, TODO es mÃ¡s difÃ­cil.',
                        tips: ['Misma hora de dormir/despertar cada dÃ­a (incluso fines de semana)', 'Sin pantallas 1 hora antes', 'HabitaciÃ³n oscura, fresca (16-18Â°C)'] },
                    { title: 'Movimiento Que Ames: No Castigo', emoji: 'ðŸ’ª',
                        desc: 'No es sobre castigar tu cuerpo. Es celebrarlo. Si odias correr, Â¡no corras! Baila, camina, nada, yoga. Lo que te haga feliz.',
                        tips: ['Encuentra actividad que disfrutes', 'Mezcla cardio + fuerza + flexibilidad', 'Consistencia > Intensidad'] },
                    { title: 'NutriciÃ³n Real: No Dietas', emoji: 'ðŸ¥—',
                        desc: 'Olvida las dietas restrictivas que te hacen sentir privada. Come alimentos REALES que te nutran: frutas, verduras, proteÃ­nas, grasas saludables.',
                        tips: ['Come arcoÃ­ris: variedad de colores', 'ProteÃ­na en cada comida (saciedad)', 'HidrataciÃ³n: agua, tÃ©, infusiones'] },
                    { title: 'Respira Profundamente: Tu Superpotencia', emoji: 'âœ¨',
                        desc: 'En momentos de estrÃ©s o sofocos, respira: inhala 4 segundos, retÃ©n 4, exhala 6. Activa tu sistema nervioso parasimpÃ¡tico.',
                        tips: ['PrÃ¡ctica 5 minutos diarios', 'Perfecto para sofocos', 'Reduce estrÃ©s inmediatamente'] },
                    { title: 'ConexiÃ³n: No EstÃ¡s Sola', emoji: 'ðŸ’œ',
                        desc: 'Habla con otras mujeres. Busca comunidad. Comparte tus experiencias. El aislamiento amplifica la ansiedad. La conexiÃ³n te empodera.',
                        tips: ['Busca grupo de apoyo local o online', 'Habla con amigas sobre perimenopausia', 'Conecta con Lumina'] },
                    { title: 'AutocompasiÃ³n: SÃ© Gentil Contigo Misma', emoji: 'ðŸŒº',
                        desc: 'Algunos dÃ­as serÃ¡n difÃ­ciles. Eso estÃ¡ bien. No eres dÃ©bil. Eres humana. Trata a ti misma como tratarÃ­as a tu mejor amiga.',
                        tips: ['PerdÃ³nate en dÃ­as difÃ­ciles', 'No compartes con otras mujeres', 'Celebra pequeÃ±os logros'] }
                ],
                en: [
                    { title: 'Quality Sleep: 7-9 Hours', emoji: 'ðŸŒ™',
                        desc: 'Sleep is where the magic happens. Your body repairs, hormones regulate, your mind regenerates. Without sleep, everything is harder.',
                        tips: ['Same sleep/wake time daily', 'No screens 1 hour before bed', 'Dark, cool room (16-18Â°C)'] },
                    { title: 'Movement You Love: No Punishment', emoji: 'ðŸ’ª',
                        desc: 'It\'s not about punishing your body. It\'s celebrating it. If you hate running, don\'t run! Dance, walk, swim, yoga. Do what makes you happy.',
                        tips: ['Find activity you enjoy', 'Mix cardio + strength + flexibility', 'Consistency > Intensity'] },
                    { title: 'Real Nutrition: No Diets', emoji: 'ðŸ¥—',
                        desc: 'Forget restrictive diets that make you feel deprived. Eat REAL foods that nourish you: fruits, vegetables, proteins, healthy fats.',
                        tips: ['Eat the rainbow: variety of colors', 'Protein with each meal (satiety)', 'Hydration: water, tea, infusions'] },
                    { title: 'Breathe Deeply: Your Superpower', emoji: 'âœ¨',
                        desc: 'In moments of stress or hot flashes: breathe in 4 seconds, hold 4, exhale 6. Activates your parasympathetic nervous system.',
                        tips: ['Practice 5 minutes daily', 'Perfect for hot flashes', 'Reduces stress immediately'] }
                ]
            };

            const calculateBMI = (weight, height) => (weight / ((height / 100) ** 2)).toFixed(1);
            const calculateTDEE = (weight, height, age, activityLevel) => {
                const bmr = 10 * weight + 6.25 * height - 5 * age + 161;
                const multipliers = { sedentary: 1.2, light: 1.375, moderate: 1.55, active: 1.725, very_active: 1.9 };
                return Math.round(bmr * (multipliers[activityLevel] || 1.55));
            };

            const handleFormChange = (field, value) => {
                setFormData(prev => ({...prev, [field]: value}));
            };

            const handleConditionToggle = (condition) => {
                setFormData(prev => ({
                    ...prev,
                    conditions: prev.conditions.includes(condition)
                        ? prev.conditions.filter(c => c !== condition)
                        : [...prev.conditions, condition]
                }));
            };

            const handleCreateProfile = () => {
                if (!formData.profileName || !formData.age || !formData.height || !formData.weight) {
                    alert(language === 'es' ? 'Completa todos los campos' : 'Fill all fields');
                    return;
                }
                const bmi = calculateBMI(formData.weight, formData.height);
                const tdee = calculateTDEE(formData.weight, formData.height, formData.age, formData.activityLevel);
                setCurrentUser({ id: Date.now(), ...formData, bmi, tdee });
                setShowWelcome(false);
                setShowOnboarding(false);
            };

            // DESCARGAR REPORTE DE SÃNTOMAS EN PDF
            const downloadSymptomsReport = () => {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                doc.setFontSize(16);
                doc.text('Reporte de SÃ­ntomas - Lumina', 20, 20);
                doc.setFontSize(10);
                doc.text(`Fecha: ${new Date().toLocaleDateString()}`, 20, 30);
                doc.text(`Perfil: ${currentUser.profileName}`, 20, 40);
                doc.text(`Edad: ${currentUser.age} aÃ±os`, 20, 50);

                doc.setFontSize(12);
                doc.text('SÃ­ntomas Actuales', 20, 65);
                doc.setFontSize(10);
                doc.text(`Calidad del SueÃ±o: ${symptoms.sleep}/10`, 30, 75);
                doc.text(`Nivel de EnergÃ­a: ${symptoms.energy}/10`, 30, 85);
                doc.text(`Ãnimo: ${symptoms.mood}/10`, 30, 95);
                doc.text(`Sofocos: ${symptoms.flashes}/10`, 30, 105);

                doc.setFontSize(12);
                doc.text('PatrÃ³n de 4 Semanas', 20, 125);
                doc.setFontSize(9);
                let y = 135;
                symptomsHistory.forEach((week, idx) => {
                    doc.text(`Semana ${week.week}: SueÃ±o ${week.sleep}, EnergÃ­a ${week.energy}, Ãnimo ${week.mood}, Sofocos ${week.flashes}`, 30, y);
                    y += 8;
                });

                doc.text('Nota: Este reporte puede compartirse con tu mÃ©dico para seguimiento.', 20, y + 10);
                
                doc.save(`Lumina_Reporte_Sintomas_${currentUser.profileName}_${new Date().toISOString().split('T')[0]}.pdf`);
            };

            // RENDER ONBOARDING
            const renderOnboarding = () => (
                <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto">
                    <div className="bg-white rounded-2xl max-w-2xl w-full p-8 shadow-2xl my-8">
                        <h2 className="text-3xl font-light gradient-text mb-8">{t[language].create_profile}</h2>
                        <div className="mb-6">
                            <label className="block text-sm font-semibold text-gray-700 mb-2">{t[language].profile_name}</label>
                            <input type="text" value={formData.profileName} onChange={(e) => handleFormChange('profileName', e.target.value)}
                                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"/>
                        </div>
                        <div className="grid grid-cols-3 gap-4 mb-6">
                            <div>
                                <label className="block text-sm font-semibold text-gray-700 mb-2">{t[language].age}</label>
                                <input type="number" value={formData.age} onChange={(e) => handleFormChange('age', e.target.value)}
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg"/>
                            </div>
                            <div>
                                <label className="block text-sm font-semibold text-gray-700 mb-2">{t[language].height}</label>
                                <input type="number" value={formData.height} onChange={(e) => handleFormChange('height', e.target.value)}
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg"/>
                            </div>
                            <div>
                                <label className="block text-sm font-semibold text-gray-700 mb-2">{t[language].weight}</label>
                                <input type="number" value={formData.weight} onChange={(e) => handleFormChange('weight', e.target.value)}
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg"/>
                            </div>
                        </div>
                        <div className="mb-6">
                            <label className="block text-sm font-semibold text-gray-700 mb-3">{t[language].activity_level}</label>
                            <div className="space-y-2">
                                {[{ value: 'sedentary', label: t[language].sedentary }, { value: 'light', label: t[language].light },
                                  { value: 'moderate', label: t[language].moderate }, { value: 'active', label: t[language].active },
                                  { value: 'very_active', label: t[language].very_active }].map(option => (
                                    <label key={option.value} className="flex items-center">
                                        <input type="radio" name="activity" value={option.value} checked={formData.activityLevel === option.value}
                                            onChange={(e) => handleFormChange('activityLevel', e.target.value)} className="mr-3"/>
                                        {option.label}
                                    </label>
                                ))}
                            </div>
                        </div>
                        <div className="mb-6">
                            <label className="block text-sm font-semibold text-gray-700 mb-3">{t[language].health_conditions}</label>
                            <div className="grid grid-cols-2 gap-3">
                                {[{ value: 'diabetes', label: t[language].condition_diabetes }, { value: 'hypertension', label: t[language].condition_hypertension },
                                  { value: 'celiac', label: t[language].condition_celiac }, { value: 'lactose', label: t[language].condition_lactose },
                                  { value: 'vegetarian', label: t[language].condition_vegetarian }, { value: 'vegan', label: t[language].condition_vegan },
                                  { value: 'arthritis', label: t[language].condition_arthritis }, { value: 'anxiety', label: t[language].condition_anxiety }]
                                  .map(condition => (
                                    <label key={condition.value} className="flex items-center">
                                        <input type="checkbox" checked={formData.conditions.includes(condition.value)}
                                            onChange={() => handleConditionToggle(condition.value)} className="mr-2"/>
                                        <span className="text-sm">{condition.label}</span>
                                    </label>
                                ))}
                            </div>
                        </div>
                        <div className="mb-8">
                            <label className="block text-sm font-semibold text-gray-700 mb-3">{t[language].weight_loss}</label>
                            <div className="space-y-2">
                                {[{ value: 'weight_loss', label: t[language].goal_weight_loss }, { value: 'gain_strength', label: t[language].goal_gain_strength },
                                  { value: 'hormonal_balance', label: t[language].goal_hormonal_balance }, { value: 'general_wellness', label: t[language].goal_general_wellness }]
                                  .map(goal => (
                                    <label key={goal.value} className="flex items-center">
                                        <input type="radio" name="goal" value={goal.value} checked={formData.goal === goal.value}
                                            onChange={(e) => handleFormChange('goal', e.target.value)} className="mr-3"/>
                                        {goal.label}
                                    </label>
                                ))}
                            </div>
                        </div>
                        <div className="flex gap-4">
                            <button onClick={handleCreateProfile} className="flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg">
                                {t[language].save}
                            </button>
                            <button onClick={() => setShowOnboarding(false)} className="flex-1 bg-gray-200 text-gray-800 py-3 rounded-lg hover:bg-gray-300">
                                {t[language].cancel}
                            </button>
                        </div>
                    </div>
                </div>
            );

            // RENDER WELCOME
            const renderWelcomeScreen = () => (
                <div className="min-h-screen bg-gradient-to-b from-purple-50 to-pink-50 py-12 px-4 relative overflow-hidden">
                    <svg className="absolute top-20 right-10 opacity-10 w-96 h-96" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
                        <ellipse cx="140" cy="120" rx="60" ry="80" fill="#9333ea" transform="rotate(-35 140 120)"/>
                        <ellipse cx="120" cy="220" rx="50" ry="70" fill="#9333ea" transform="rotate(35 120 220)"/>
                        <ellipse cx="260" cy="120" rx="60" ry="80" fill="#ec4899" transform="rotate(35 260 120)"/>
                        <ellipse cx="280" cy="220" rx="50" ry="70" fill="#ec4899" transform="rotate(-35 280 220)"/>
                        <ellipse cx="200" cy="170" rx="15" ry="60" fill="#6b21a8"/>
                        <circle cx="200" cy="110" r="12" fill="#6b21a8"/>
                    </svg>

                    <div className="max-w-4xl mx-auto relative z-10">
                        <div className="flex justify-between items-center mb-12">
                            <h1 className="text-4xl font-light gradient-text">âœ¨ {t[language].app_name}</h1>
                            <div className="flex gap-2">
                                <button onClick={() => setLanguage('es')} className={`px-4 py-2 rounded ${language === 'es' ? 'bg-purple-600 text-white' : 'bg-gray-200'}`}>EspaÃ±ol</button>
                                <button onClick={() => setLanguage('en')} className={`px-4 py-2 rounded ${language === 'en' ? 'bg-purple-600 text-white' : 'bg-gray-200'}`}>English</button>
                            </div>
                        </div>

                        <div className="bg-white rounded-2xl p-12 shadow-lg mb-12 text-center border-t-4 border-purple-600">
                            <h2 className="text-3xl font-light gradient-text mb-4">{t[language].welcome_title}</h2>
                            <p className="text-2xl text-purple-600 mb-6">{t[language].welcome_subtitle}</p>
                            <p className="text-lg text-gray-700 leading-relaxed">{t[language].welcome_desc}</p>
                        </div>

                        <div className="grid md:grid-cols-2 gap-6 mb-12">
                            <div className="bg-white rounded-xl p-8 shadow-lg">
                                <h3 className="text-2xl font-semibold gradient-text mb-4">{t[language].what_is_perimenopause}</h3>
                                <p className="text-gray-700 mb-4">{t[language].perimenopause_desc}</p>
                                <h4 className="font-semibold text-gray-800 mb-3">{t[language].normal_symptoms}</h4>
                                <ul className="space-y-2 text-sm text-gray-700">
                                    <li>âœ“ {t[language].symptom_hot_flashes}</li>
                                    <li>âœ“ {t[language].symptom_mood}</li>
                                    <li>âœ“ {t[language].symptom_sleep}</li>
                                    <li>âœ“ {t[language].symptom_weight}</li>
                                    <li>âœ“ {t[language].symptom_energy}</li>
                                </ul>
                            </div>

                            <div className="space-y-6">
                                <div className="bg-white rounded-xl p-8 shadow-lg border-l-4 border-purple-600">
                                    <h3 className="text-2xl font-semibold gradient-text mb-3">{t[language].what_is_bmi}</h3>
                                    <p className="text-gray-700 text-sm leading-relaxed">{t[language].bmi_desc}</p>
                                </div>
                                <div className="bg-white rounded-xl p-8 shadow-lg border-l-4 border-pink-600">
                                    <h3 className="text-2xl font-semibold gradient-text mb-3">{t[language].what_is_tdee}</h3>
                                    <p className="text-gray-700 text-sm leading-relaxed">{t[language].tdee_desc}</p>
                                </div>
                            </div>
                        </div>

                        <div className="bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-12 mb-12 border-2 border-purple-200">
                            <h2 className="text-3xl font-light gradient-text mb-8 text-center">{t[language].what_you_find}</h2>
                            <div className="grid md:grid-cols-2 gap-6">
                                <div className="bg-white rounded-lg p-6 shadow-md">
                                    <p className="text-gray-800 leading-relaxed font-medium">{t[language].find_nutrition}</p>
                                </div>
                                <div className="bg-white rounded-lg p-6 shadow-md">
                                    <p className="text-gray-800 leading-relaxed font-medium">{t[language].find_exercise}</p>
                                </div>
                                <div className="bg-white rounded-lg p-6 shadow-md">
                                    <p className="text-gray-800 leading-relaxed font-medium">{t[language].find_tracking}</p>
                                </div>
                                <div className="bg-white rounded-lg p-6 shadow-md">
                                    <p className="text-gray-800 leading-relaxed font-medium">{t[language].find_education}</p>
                                </div>
                                <div className="bg-gradient-to-br from-purple-100 to-pink-100 rounded-lg p-6 shadow-md border-2 border-purple-300 md:col-span-2">
                                    <p className="text-gray-800 leading-relaxed font-medium text-center text-lg">{t[language].find_community}</p>
                                </div>
                                <div className="bg-gradient-to-br from-purple-100 to-pink-100 rounded-lg p-6 shadow-md border-2 border-pink-300 md:col-span-2">
                                    <p className="text-gray-800 leading-relaxed font-medium text-center text-lg">{t[language].find_refuge}</p>
                                </div>
                            </div>
                        </div>

                        <div className="text-center">
                            <button onClick={() => setShowOnboarding(true)} className="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-12 py-4 rounded-xl text-lg font-semibold hover:shadow-xl transition elegant-button">
                                {t[language].lets_get_started} ðŸ’ª
                            </button>
                            <p className="text-gray-600 text-sm mt-6 italic">{language === 'es' ? 'Tu transformaciÃ³n comienza aquÃ­. TÃº no estÃ¡s sola en esto.' : 'Your transformation starts here.'}</p>
                        </div>
                    </div>
                </div>
            );

            // RENDER DASHBOARD
            const renderDashboard = () => (
                <div className="pb-32 space-y-6">
                    {currentUser && (
                        <>
                            <div className="bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl p-8 shadow-lg">
                                <h2 className="text-3xl font-light mb-2">{t[language].hello}, {currentUser.profileName}! ðŸ’œ</h2>
                                <p className="text-lg opacity-90">{t[language].empowerment_msg}</p>
                            </div>

                            <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div className="bg-white rounded-xl p-6 shadow-lg border-t-4 border-purple-600">
                                    <div className="text-sm text-gray-600 mb-2">{t[language].bmi_label}</div>
                                    <div className="text-3xl font-semibold gradient-text">{currentUser.bmi}</div>
                                </div>
                                <div className="bg-white rounded-xl p-6 shadow-lg border-t-4 border-pink-600">
                                    <div className="text-sm text-gray-600 mb-2">{t[language].tdee_label}</div>
                                    <div className="text-3xl font-semibold text-pink-600">{currentUser.tdee}</div>
                                </div>
                                <div className="bg-white rounded-xl p-6 shadow-lg border-t-4 border-green-600">
                                    <div className="text-sm text-gray-600 mb-2">{t[language].activity_level}</div>
                                    <div className="text-lg font-semibold text-green-600 capitalize">{currentUser.activityLevel}</div>
                                </div>
                            </div>

                            <button onClick={() => setShowOnboarding(true)} className="w-full bg-purple-100 text-purple-700 py-3 rounded-lg font-semibold hover:bg-purple-200">
                                {t[language].edit_profile}
                            </button>
                        </>
                    )}
                </div>
            );

            // RENDER NUTRITION
            const renderNutrition = () => {
                const days = { es: ['lunes', 'martes', 'miercoles'], en: ['monday'] };
                const dayKey = days[language][new Date().getDay() % 3];
                const todayMeals = mealsData[language]?.[dayKey];
                
                return (
                    <div className="pb-32 space-y-6">
                        <div>
                            <h2 className="text-3xl font-light gradient-text mb-2">{t[language].todays_menu}</h2>
                            <p className="text-gray-600 text-sm">{t[language].nutrition_explanation}</p>
                        </div>
                        
                        {todayMeals && (
                            <div className="space-y-6">
                                {['breakfast', 'lunch', 'dinner'].map((mealType) => {
                                    const meal = todayMeals[mealType];
                                    return (
                                        <div key={mealType} className="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition">
                                            <div className="flex justify-between items-start mb-4">
                                                <div>
                                                    <h3 className="text-2xl font-semibold text-gray-800">{meal.name}</h3>
                                                    <p className="text-gray-600 text-sm mt-1">{t[language][mealType]}</p>
                                                </div>
                                                <span className="bg-purple-100 text-purple-700 px-4 py-2 rounded-lg text-sm font-semibold">{meal.calories} {t[language].calories}</span>
                                            </div>

                                            <div className="grid grid-cols-3 gap-4 mb-6 text-sm">
                                                <div className="bg-gray-50 p-3 rounded-lg text-center">
                                                    <span className="text-gray-600">â±</span> {meal.prepTime} {t[language].minutes}
                                                </div>
                                                <div className="bg-gray-50 p-3 rounded-lg text-center">
                                                    <span className="text-gray-600">ðŸ”¥</span> {meal.cookTime} {t[language].minutes}
                                                </div>
                                                <div className="bg-gray-50 p-3 rounded-lg text-center">
                                                    <span className="text-gray-600">ðŸ½</span> {meal.servings} {t[language].servings}
                                                </div>
                                            </div>

                                            <div className="grid md:grid-cols-2 gap-6">
                                                <div>
                                                    <h4 className="font-semibold text-gray-800 mb-3">{t[language].ingredients}</h4>
                                                    <ul className="space-y-2">
                                                        {meal.ingredients.map((ing, idx) => (
                                                            <li key={idx} className="text-sm text-gray-700 flex justify-between">
                                                                <span>{ing.name}</span>
                                                                <span className="text-purple-600 font-medium">{ing.qty} {ing.unit}</span>
                                                            </li>
                                                        ))}
                                                    </ul>
                                                </div>

                                                <div>
                                                    <h4 className="font-semibold text-gray-800 mb-3">{t[language].preparation}</h4>
                                                    <ol className="space-y-2">
                                                        {meal.steps.map((step, idx) => (
                                                            <li key={idx} className="text-sm text-gray-700 flex gap-2">
                                                                <span className="text-purple-600 font-bold">{idx + 1}.</span>
                                                                <span>{step}</span>
                                                            </li>
                                                        ))}
                                                    </ol>
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        )}
                    </div>
                );
            };

            // RENDER EXERCISES - PERSONALIZADO
            const renderExercises = () => {
                const exercises = getPersonalizedExercises();
                
                return (
                    <div className="pb-32 space-y-6">
                        <div>
                            <h2 className="text-3xl font-light gradient-text">{t[language].exercises}</h2>
                            <p className="text-gray-600 text-sm mt-2">{t[language].exercise_personalized}</p>
                            {currentUser && (
                                <div className="bg-purple-50 rounded-lg p-4 mt-3 text-sm text-gray-700">
                                    <p><span className="font-semibold">{t[language].your_goal}:</span> {currentUser.goal}</p>
                                </div>
                            )}
                        </div>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            {exercises.map(ex => (
                                <div key={ex.id} className="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition">
                                    <h3 className="text-xl font-semibold text-gray-800 mb-2">{ex.name}</h3>
                                    <p className="text-gray-600 text-sm mb-4">{ex.desc}</p>
                                    
                                    <div className="space-y-3 text-sm mb-4">
                                        <div className="flex justify-between">
                                            <span className="text-gray-600">â± {t[language].duration}:</span>
                                            <span className="font-semibold">{ex.duration}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className="text-gray-600">ðŸ’ª {t[language].difficulty}:</span>
                                            <span className="font-semibold">{ex.difficulty}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className="text-gray-600">ðŸ” {t[language].reps}:</span>
                                            <span className="font-semibold">{ex.reps}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className="text-gray-600">ðŸ“… {t[language].frequency}:</span>
                                            <span className="font-semibold">{ex.frequency}</span>
                                        </div>
                                    </div>

                                    <div className="bg-purple-50 p-3 rounded-lg mb-4">
                                        <p className="text-xs text-gray-700"><span className="font-semibold">âœ¨ {t[language].benefits}:</span> {ex.benefits}</p>
                                    </div>

                                    <div className="bg-green-50 p-3 rounded-lg">
                                        <p className="text-xs text-gray-700"><span className="font-semibold">ðŸ“ {t[language].how_to_do}:</span> {ex.howto}</p>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                );
            };

            // RENDER SYMPTOMS
            const renderSymptoms = () => {
                return (
                    <div className="pb-32 space-y-6">
                        <h2 className="text-3xl font-light gradient-text">{t[language].symptoms}</h2>
                        
                        <div className="bg-white rounded-xl p-8 shadow-lg">
                            <h3 className="text-xl font-semibold text-gray-800 mb-6">{t[language].how_you_feel}</h3>
                            
                            <div className="space-y-6 mb-8">
                                {[
                                    { label: t[language].sleep_quality, key: 'sleep', emoji: 'ðŸ˜´' },
                                    { label: t[language].energy_level, key: 'energy', emoji: 'âš¡' },
                                    { label: t[language].mood, key: 'mood', emoji: 'ðŸŒŸ' },
                                    { label: t[language].hot_flashes, key: 'flashes', emoji: 'ðŸ”¥' }
                                ].map((item, idx) => (
                                    <div key={idx}>
                                        <div className="flex justify-between items-center mb-2">
                                            <label className="text-sm font-semibold text-gray-700">{item.emoji} {item.label}</label>
                                            <span className="text-purple-600 font-bold">{symptoms[item.key]}</span>
                                        </div>
                                        <input 
                                            type="range" 
                                            min="0" 
                                            max="10" 
                                            value={symptoms[item.key]}
                                            onChange={(e) => setSymptoms({...symptoms, [item.key]: parseInt(e.target.value)})}
                                            className="w-full accent-purple-600"
                                        />
                                    </div>
                                ))}
                            </div>

                            <button className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg">
                                {t[language].record_today}
                            </button>
                        </div>

                        <div className="bg-white rounded-xl p-8 shadow-lg">
                            <h3 className="text-xl font-semibold text-gray-800 mb-4">{t[language].your_pattern}</h3>
                            <div className="chart-container">
                                <canvas id="symptomChart"></canvas>
                            </div>
                        </div>

                        <div className="bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-8 shadow-lg">
                            <p className="text-gray-800 text-sm mb-4">{t[language].download_info}</p>
                            <button onClick={downloadSymptomsReport} className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg">
                                ðŸ“¥ {t[language].download_report}
                            </button>
                        </div>
                    </div>
                );
            };

            // RENDER PERIOD
            const renderPeriod = () => {
                return (
                    <div className="pb-32 space-y-6">
                        <h2 className="text-3xl font-light gradient-text">{t[language].period_tracking}</h2>

                        <div className="bg-white rounded-xl p-8 shadow-lg">
                            <h3 className="text-xl font-semibold text-gray-800 mb-6">{t[language].record_period}</h3>
                            
                            <div className="space-y-4 mb-6">
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">{t[language].intensity} (1-10)</label>
                                    <input type="range" min="1" max="10" className="w-full accent-purple-600"/>
                                </div>
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">{t[language].period_duration}</label>
                                    <select className="w-full px-4 py-2 border border-gray-300 rounded-lg">
                                        {[1, 2, 3, 4, 5, 6, 7, 8].map(day => <option key={day}>{day}</option>)}
                                    </select>
                                </div>
                            </div>

                            <button className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg">
                                {t[language].save}
                            </button>
                        </div>

                        <div className="bg-white rounded-xl p-8 shadow-lg">
                            <h3 className="text-xl font-semibold text-gray-800 mb-4">{t[language].period_pattern}</h3>
                            <div className="space-y-4">
                                <p className="text-gray-700"><span className="font-semibold">{t[language].cycle_average}</span> 28-29 {t[language].days_between}</p>
                                <div className="chart-container">
                                    <canvas id="periodChart"></canvas>
                                </div>
                            </div>
                        </div>

                        <div className="bg-blue-50 rounded-xl p-8 shadow-lg border-l-4 border-blue-600">
                            <h4 className="font-semibold text-gray-800 mb-3">ðŸ“Š {language === 'es' ? 'Tu Tendencia' : 'Your Trend'}</h4>
                            <p className="text-gray-700 text-sm">
                                {language === 'es' 
                                    ? 'Tu ciclo es regular y predecible. Esto es excelente para planificar. Tu prÃ³ximo perÃ­odo deberÃ­a llegar alrededor del 15-18. Ten en cuenta que la perimenopausia puede causar cambios en el ciclo - esto es normal.'
                                    : 'Your cycle is regular and predictable. This is excellent for planning. Your next period should arrive around the 15-18. Keep in mind that perimenopause can cause cycle changes - this is normal.'}
                            </p>
                        </div>
                    </div>
                );
            };

            // RENDER MYTHS
            const renderMyths = () => {
                const myths = mythsData[language] || mythsData.es;
                
                return (
                    <div className="pb-32 space-y-6">
                        <h2 className="text-3xl font-light gradient-text">{t[language].myths_title}</h2>
                        
                        {myths.map((item, idx) => (
                            <div key={idx} className="bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition">
                                <div className="mb-6">
                                    <h3 className="text-lg font-semibold text-red-600 mb-2">âŒ {t[language].myth_title}</h3>
                                    <p className="text-gray-800">{item.myth}</p>
                                </div>
                                <div className="mb-6 pl-4 border-l-4 border-green-500">
                                    <h4 className="text-lg font-semibold text-green-600 mb-2">âœ… {t[language].myth_truth}</h4>
                                    <p className="text-gray-700">{item.truth}</p>
                                </div>
                                <div className="bg-purple-50 p-4 rounded-lg">
                                    <p className="text-sm text-gray-700"><span className="font-semibold">ðŸ’¡ {t[language].action}:</span> {item.action}</p>
                                </div>
                            </div>
                        ))}
                    </div>
                );
            };

            // RENDER TIPS
            const renderTips = () => {
                const tips = tipsData[language] || tipsData.es;
                
                return (
                    <div className="pb-32 space-y-6">
                        <h2 className="text-3xl font-light gradient-text">{t[language].tips_title}</h2>
                        
                        <div className="grid grid-cols-1 gap-6">
                            {tips.map((tip, idx) => (
                                <div key={idx} className="bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-8 shadow-lg border-l-4 border-purple-600">
                                    <div className="flex items-start gap-4 mb-4">
                                        <span className="text-4xl">{tip.emoji}</span>
                                        <h3 className="text-xl font-semibold text-gray-800">{tip.title}</h3>
                                    </div>
                                    <p className="text-gray-700 mb-4 leading-relaxed">{tip.desc}</p>
                                    {tip.tips && (
                                        <div className="bg-white rounded-lg p-4">
                                            <ul className="space-y-2">
                                                {tip.tips.map((t, i) => (
                                                    <li key={i} className="text-sm text-gray-700 flex items-start gap-2">
                                                        <span className="text-purple-600 font-bold">âœ“</span>
                                                        <span>{t}</span>
                                                    </li>
                                                ))}
                                            </ul>
                                        </div>
                                    )}
                                </div>
                            ))}
                        </div>
                    </div>
                );
            };

            // RENDER WORKSHOPS
            const renderWorkshops = () => {
                const workshops = [
                    { title: language === 'es' ? 'NutriciÃ³n para la Perimenopausia' : 'Nutrition for Perimenopause', type: 'webinar', date: language === 'es' ? '15 de Diciembre' : 'December 15', desc: language === 'es' ? 'Aprende cÃ³mo alimentarte' : 'Learn how to eat' },
                    { title: language === 'es' ? 'Ejercicio y Fuerza Ã“sea' : 'Exercise and Bone Strength', type: 'workshop', date: language === 'es' ? '20 de Diciembre' : 'December 20', desc: language === 'es' ? 'Ejercicios especÃ­ficos' : 'Specific exercises' }
                ];
                
                return (
                    <div className="pb-32 space-y-6">
                        <h2 className="text-3xl font-light gradient-text">{t[language].workshops_title}</h2>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            {workshops.map((ws, idx) => (
                                <div key={idx} className="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition">
                                    <div className="flex justify-between items-start mb-3">
                                        <h3 className="text-lg font-semibold text-gray-800">{ws.title}</h3>
                                        <span className={`px-3 py-1 rounded-full text-xs font-semibold ${
                                            ws.type === 'webinar' ? 'bg-blue-100 text-blue-700' : 'bg-green-100 text-green-700'
                                        }`}>
                                            {ws.type === 'webinar' ? 'ðŸ–¥ï¸ ' : 'ðŸ‘¥ '}{ws.type === 'webinar' ? t[language].webinar : t[language].workshop}
                                        </span>
                                    </div>
                                    <p className="text-gray-600 text-sm mb-3">{ws.desc}</p>
                                    <p className="text-purple-600 font-semibold text-sm">ðŸ“… {ws.date}</p>
                                    <button className="w-full mt-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-2 rounded-lg text-sm font-semibold hover:shadow-lg">
                                        {language === 'es' ? 'Registrarse' : 'Register'}
                                    </button>
                                </div>
                            ))}
                        </div>
                    </div>
                );
            };

            // RENDER COMMUNITY
            const renderCommunity = () => {
                const stories = [
                    { name: language === 'es' ? 'MarÃ­a, 48' : 'Maria, 48', story: language === 'es' ? 'Hace un aÃ±o estaba perdida. Ahora entiendo mi cuerpo.' : 'A year ago I was lost. Now I understand my body.' },
                    { name: language === 'es' ? 'Ana, 52' : 'Ana, 52', story: language === 'es' ? 'PensÃ© que tendrÃ­a que tomar hormonas. Ahora me siento mejor que nunca.' : 'I thought I\'d have to take hormones. Now I feel better than ever.' }
                ];
                
                return (
                    <div className="pb-32 space-y-6">
                        <h2 className="text-3xl font-light gradient-text">{t[language].community_title}</h2>
                        
                        <div className="bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl p-8 shadow-lg">
                            <h3 className="text-2xl font-light mb-4">ðŸ’œ {t[language].share_story}</h3>
                            <textarea className="w-full bg-white/20 border-2 border-white rounded-lg p-4 text-white placeholder-white/70 min-h-24"
                                placeholder={t[language].your_story}></textarea>
                            <button className="w-full mt-4 bg-white text-purple-600 py-3 rounded-lg font-semibold hover:bg-gray-100">
                                {t[language].save}
                            </button>
                        </div>

                        <div>
                            <h3 className="text-2xl font-semibold text-gray-800 mb-4">{language === 'es' ? 'Historias de Mujeres' : 'Women\'s Stories'}</h3>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                {stories.map((story, idx) => (
                                    <div key={idx} className="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition border-l-4 border-purple-600">
                                        <h4 className="font-semibold text-gray-800 mb-2">ðŸ‘© {story.name}</h4>
                                        <p className="text-gray-700 italic">"{story.story}"</p>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                );
            };

            // RENDER CONTENT
            const renderContent = () => {
                if (!currentUser) return null;
                
                switch(currentPage) {
                    case 'dashboard': return renderDashboard();
                    case 'nutrition': return renderNutrition();
                    case 'exercise': return renderExercises();
                    case 'symptoms': return renderSymptoms();
                    case 'period': return renderPeriod();
                    case 'myths': return renderMyths();
                    case 'tips': return renderTips();
                    case 'workshops': return renderWorkshops();
                    case 'community': return renderCommunity();
                    default: return renderDashboard();
                }
            };

            // CHARTS
            useEffect(() => {
                if (currentPage === 'symptoms' && chartRef.current && currentUser) {
                    const ctx = chartRef.current.getContext('2d');
                    if (chartInstance.current) chartInstance.current.destroy();

                    chartInstance.current = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: symptomsHistory.map(s => `Week ${s.week}`),
                            datasets: [
                                { label: language === 'es' ? 'SueÃ±o' : 'Sleep', data: symptomsHistory.map(s => s.sleep),
                                    borderColor: '#9333ea', backgroundColor: 'rgba(147, 51, 234, 0.1)', tension: 0.4 },
                                { label: language === 'es' ? 'EnergÃ­a' : 'Energy', data: symptomsHistory.map(s => s.energy),
                                    borderColor: '#ec4899', backgroundColor: 'rgba(236, 72, 153, 0.1)', tension: 0.4 },
                                { label: language === 'es' ? 'Ãnimo' : 'Mood', data: symptomsHistory.map(s => s.mood),
                                    borderColor: '#10b981', backgroundColor: 'rgba(16, 185, 129, 0.1)', tension: 0.4 }
                            ]
                        },
                        options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true, max: 10 } } }
                    });
                }

                if (currentPage === 'period' && periodChartRef.current && currentUser) {
                    const ctx = periodChartRef.current.getContext('2d');
                    if (periodChartInstance.current) periodChartInstance.current.destroy();

                    periodChartInstance.current = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: periodData.map(p => p.month),
                            datasets: [
                                { label: language === 'es' ? 'Intensidad' : 'Intensity', data: periodData.map(p => p.intensity),
                                    backgroundColor: '#ec4899' },
                                { label: language === 'es' ? 'DuraciÃ³n' : 'Duration', data: periodData.map(p => p.duration),
                                    backgroundColor: '#9333ea' }
                            ]
                        },
                        options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true } } }
                    });
                }
            }, [currentPage, currentUser, language]);

            if (showWelcome && !currentUser) {
                return (
                    <>
                        {renderWelcomeScreen()}
                        {showOnboarding && renderOnboarding()}
                    </>
                );
            }

            return (
                <div>
                    <header className="bg-white shadow-lg sticky top-0 z-40">
                        <div className="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
                            <h1 className="text-2xl font-light gradient-text">âœ¨ {t[language].app_name}</h1>
                            <div className="flex gap-3 items-center">
                                <select value={language} onChange={(e) => setLanguage(e.target.value)}
                                    className="px-3 py-2 border border-gray-300 rounded-lg text-sm">
                                    <option value="es">EspaÃ±ol</option>
                                    <option value="en">English</option>
                                </select>
                                <button onClick={() => { setCurrentUser(null); setShowWelcome(true); }}
                                    className="px-4 py-2 bg-purple-600 text-white rounded-lg text-sm hover:bg-purple-700">
                                    {t[language].logout}
                                </button>
                            </div>
                        </div>
                    </header>

                    <main className="max-w-6xl mx-auto px-4 py-6">
                        {renderContent()}
                    </main>

                    <nav className="fixed bottom-0 left-0 right-0 border-t-2 bg-white shadow-lg overflow-x-auto">
                        <div className="max-w-6xl mx-auto flex justify-around">
                            {[
                                { page: 'dashboard', label: t[language].dashboard },
                                { page: 'nutrition', label: t[language].nutrition },
                                { page: 'exercise', label: t[language].exercise },
                                { page: 'symptoms', label: t[language].symptoms },
                                { page: 'period', label: t[language].period },
                                { page: 'myths', label: t[language].myths },
                                { page: 'tips', label: t[language].tips },
                                { page: 'workshops', label: t[language].workshops },
                                { page: 'community', label: t[language].community }
                            ].map((item) => (
                                <button key={item.page} onClick={() => setCurrentPage(item.page)}
                                    className={`py-4 px-2 text-xs sm:text-sm font-medium border-t-4 transition ${
                                        currentPage === item.page ? 'border-purple-600 bg-purple-50 text-purple-600' : 'border-gray-200 text-gray-600'
                                    }`}>
                                    {item.label}
                                </button>
                            ))}
                        </div>
                    </nav>

                    {showOnboarding && renderOnboarding()}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<LuminaApp />);
    </script>
</body>
</html>
